{"ast":null,"code":"import _slicedToArray from\"/home/baboulass/dev/projets/post-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{React,Fragment,useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),body=_useState4[0],setBody=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),posts=_useState6[0],setPosts=_useState6[1];var handleChange=function handleChange(_ref){var target=_ref.target;var name=target.name,value=target.value;if(name===\"title\"){setTitle(value);}else if(name===\"body\"){setBody(value);}};var handleSubmit=function handleSubmit(event){event.preventDefault();var payload={title:title,body:body};//console.log(payload);\naxios({url:\"/api/save\",method:\"POST\",data:payload}).then(function(){console.log(\"Data has been sent to the server\");resetUserInputs();getPosts();}).catch(function(){console.log(\"Internal server error\");});};var resetUserInputs=function resetUserInputs(){setTitle(\"\");setBody(\"\");};var getPosts=function getPosts(){axios({url:\"/api\"}).then(function(response){var data=response.data;setPosts(data);}).catch(function(){alert(\"Error retrieving data!\");});};var displayPosts=function displayPosts(posts){//console.log(posts);\nif(!posts.length)return null;return posts.map(function(post,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"posts\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"post-title\",children:post.title}),/*#__PURE__*/_jsx(\"p\",{className:\"post-body\",children:post.body})]},index);});};useEffect(function(){getPosts();},[]);return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{id:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{id:\"title\",children:\"Post App - Fullstack application(MERN)\"}),/*#__PURE__*/_jsx(\"h2\",{id:\"subtitle\",children:\"Welcome to my App!\"}),/*#__PURE__*/_jsxs(\"form\",{id:\"form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-input\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",placeholder:\"Enter your title\",value:title,onChange:handleChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-input\",children:/*#__PURE__*/_jsx(\"textarea\",{name:\"body\",placeholder:\"Enter your body\",value:body,onChange:handleChange})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"posts-container\",children:displayPosts(posts)})]})});};export default App;","map":{"version":3,"sources":["/home/baboulass/dev/projets/post-app/client/src/App.js"],"names":["React","Fragment","useState","useEffect","axios","App","title","setTitle","body","setBody","posts","setPosts","handleChange","target","name","value","handleSubmit","event","preventDefault","payload","url","method","data","then","console","log","resetUserInputs","getPosts","catch","response","alert","displayPosts","length","map","post","index"],"mappings":"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","sourcesContent":["import { React, Fragment, useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst App = () => {\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [posts, setPosts] = useState([]);\n\n  const handleChange = ({ target }) => {\n    const { name, value } = target;\n\n    if (name === \"title\") {\n      setTitle(value);\n    } else if (name === \"body\") {\n      setBody(value);\n    }\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const payload = {\n      title,\n      body,\n    };\n    //console.log(payload);\n\n    axios({\n      url: \"/api/save\",\n      method: \"POST\",\n      data: payload,\n    })\n      .then(() => {\n        console.log(\"Data has been sent to the server\");\n        resetUserInputs();\n        getPosts();\n      })\n      .catch(() => {\n        console.log(\"Internal server error\");\n      });\n  };\n\n  const resetUserInputs = () => {\n    setTitle(\"\");\n    setBody(\"\");\n  };\n\n  const getPosts = () => {\n    axios({\n      url: \"/api\",\n    })\n      .then((response) => {\n        const data = response.data;\n        setPosts(data);\n      })\n      .catch(() => {\n        alert(\"Error retrieving data!\");\n      });\n  };\n\n  const displayPosts = (posts) => {\n    //console.log(posts);\n    if (!posts.length) return null;\n    return posts.map((post, index) => (\n      <div className=\"posts\" key={index}>\n        <h3 className=\"post-title\">{post.title}</h3>\n        <p className=\"post-body\">{post.body}</p>\n      </div>\n    ));\n  };\n\n  useEffect(() => {\n    getPosts();\n  }, []);\n\n  return (\n    <Fragment>\n      <div id=\"container\">\n        <h1 id=\"title\">Post App - Fullstack application(MERN)</h1>\n        <h2 id=\"subtitle\">Welcome to my App!</h2>\n        <form id=\"form\" onSubmit={handleSubmit}>\n          <div className=\"form-input\">\n            <input\n              type=\"text\"\n              name=\"title\"\n              placeholder=\"Enter your title\"\n              value={title}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"form-input\">\n            <textarea\n              name=\"body\"\n              placeholder=\"Enter your body\"\n              value={body}\n              onChange={handleChange}\n            ></textarea>\n          </div>\n          <button type=\"submit\">Submit</button>\n        </form>\n        <div className=\"posts-container\">{displayPosts(posts)}</div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}